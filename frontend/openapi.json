{"components":{"responses":{"Error":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}},"description":"Error"}},"schemas":{"ChatHistory":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array"},"session":{"$ref":"#/components/schemas/ChatSession"}},"required":["messages","session"],"type":"object"},"ChatMessage":{"properties":{"content":{"type":"string"},"context_chunks":{"items":{"format":"int64","type":"integer"},"nullable":true,"type":"array"},"created_at":{"format":"date-time","type":"string"},"id":{"format":"int64","type":"integer"},"role":{"$ref":"#/components/schemas/MessageRole"},"session_id":{"format":"int64","type":"integer"}},"required":["content","created_at","id","role","session_id"],"type":"object"},"ChatRequest":{"properties":{"message":{"type":"string"},"session_id":{"format":"int64","type":"integer"}},"required":["message","session_id"],"type":"object"},"ChatResponse":{"properties":{"context_sources":{"items":{"$ref":"#/components/schemas/ContextSource"},"type":"array"},"message":{"$ref":"#/components/schemas/ChatMessage"}},"required":["context_sources","message"],"type":"object"},"ChatSession":{"properties":{"created_at":{"format":"date-time","type":"string"},"game_id":{"format":"int64","type":"integer"},"id":{"format":"int64","type":"integer"},"title":{"nullable":true,"type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["created_at","game_id","id","updated_at"],"type":"object"},"ChatSessionSummary":{"properties":{"created_at":{"format":"date-time","type":"string"},"game_id":{"format":"int64","type":"integer"},"id":{"format":"int64","type":"integer"},"last_message_at":{"format":"date-time","nullable":true,"type":"string"},"message_count":{"format":"int32","type":"integer"},"title":{"nullable":true,"type":"string"}},"required":["created_at","game_id","id","message_count"],"type":"object"},"ContextSource":{"properties":{"chunk_text":{"type":"string"},"embedding_id":{"format":"int64","type":"integer"},"metadata":{"nullable":true,"type":"string"},"similarity_score":{"format":"float","type":"number"},"source_type":{"type":"string"}},"required":["chunk_text","embedding_id","similarity_score","source_type"],"type":"object"},"CreateChatSessionRequest":{"properties":{"game_id":{"format":"int64","type":"integer"},"title":{"nullable":true,"type":"string"}},"required":["game_id"],"type":"object"},"CreateGameRequest":{"properties":{"bgg_id":{"format":"int32","nullable":true,"type":"integer"},"complexity_rating":{"format":"double","nullable":true,"type":"number"},"description":{"nullable":true,"type":"string"},"max_players":{"format":"int32","nullable":true,"type":"integer"},"min_players":{"format":"int32","nullable":true,"type":"integer"},"name":{"type":"string"},"play_time_minutes":{"format":"int32","nullable":true,"type":"integer"},"publisher":{"nullable":true,"type":"string"},"year_published":{"format":"int32","nullable":true,"type":"integer"}},"required":["name"],"type":"object"},"CreateHouseRuleRequest":{"properties":{"category":{"nullable":true,"type":"string"},"description":{"type":"string"},"game_id":{"format":"int64","type":"integer"},"is_active":{"default":true,"type":"boolean"},"title":{"type":"string"}},"required":["description","game_id","title"],"type":"object"},"Error":{"description":"Error information from a response.","properties":{"error_code":{"type":"string"},"message":{"type":"string"},"request_id":{"type":"string"}},"required":["message","request_id"],"type":"object"},"Game":{"properties":{"bgg_id":{"format":"int32","nullable":true,"type":"integer"},"complexity_rating":{"format":"double","nullable":true,"type":"number"},"created_at":{"format":"date-time","type":"string"},"description":{"nullable":true,"type":"string"},"id":{"format":"int64","type":"integer"},"max_players":{"format":"int32","nullable":true,"type":"integer"},"min_players":{"format":"int32","nullable":true,"type":"integer"},"name":{"type":"string"},"play_time_minutes":{"format":"int32","nullable":true,"type":"integer"},"publisher":{"nullable":true,"type":"string"},"rules_pdf_path":{"nullable":true,"type":"string"},"rules_text":{"nullable":true,"type":"string"},"updated_at":{"format":"date-time","type":"string"},"year_published":{"format":"int32","nullable":true,"type":"integer"}},"required":["created_at","id","name","updated_at"],"type":"object"},"GameSummary":{"properties":{"complexity_rating":{"format":"double","nullable":true,"type":"number"},"has_rules_pdf":{"type":"boolean"},"house_rules_count":{"format":"int32","type":"integer"},"id":{"format":"int64","type":"integer"},"max_players":{"format":"int32","nullable":true,"type":"integer"},"min_players":{"format":"int32","nullable":true,"type":"integer"},"name":{"type":"string"},"publisher":{"nullable":true,"type":"string"},"year_published":{"format":"int32","nullable":true,"type":"integer"}},"required":["has_rules_pdf","house_rules_count","id","name"],"type":"object"},"HouseRule":{"properties":{"category":{"nullable":true,"type":"string"},"created_at":{"format":"date-time","type":"string"},"description":{"type":"string"},"game_id":{"format":"int64","type":"integer"},"id":{"format":"int64","type":"integer"},"is_active":{"type":"boolean"},"title":{"type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["created_at","description","game_id","id","is_active","title","updated_at"],"type":"object"},"MessageRole":{"enum":["user","assistant","system"],"type":"string"},"PaginatedResponse_for_ChatSessionSummary":{"properties":{"items":{"items":{"$ref":"#/components/schemas/ChatSessionSummary"},"type":"array"},"limit":{"format":"uint32","minimum":0,"type":"integer"},"page":{"format":"uint32","minimum":0,"type":"integer"},"total":{"format":"uint32","minimum":0,"type":"integer"},"total_pages":{"format":"uint32","minimum":0,"type":"integer"}},"required":["items","limit","page","total","total_pages"],"type":"object"},"PaginatedResponse_for_GameSummary":{"properties":{"items":{"items":{"$ref":"#/components/schemas/GameSummary"},"type":"array"},"limit":{"format":"uint32","minimum":0,"type":"integer"},"page":{"format":"uint32","minimum":0,"type":"integer"},"total":{"format":"uint32","minimum":0,"type":"integer"},"total_pages":{"format":"uint32","minimum":0,"type":"integer"}},"required":["items","limit","page","total","total_pages"],"type":"object"},"PaginatedResponse_for_HouseRule":{"properties":{"items":{"items":{"$ref":"#/components/schemas/HouseRule"},"type":"array"},"limit":{"format":"uint32","minimum":0,"type":"integer"},"page":{"format":"uint32","minimum":0,"type":"integer"},"total":{"format":"uint32","minimum":0,"type":"integer"},"total_pages":{"format":"uint32","minimum":0,"type":"integer"}},"required":["items","limit","page","total","total_pages"],"type":"object"},"UpdateGameRequest":{"properties":{"bgg_id":{"format":"int32","nullable":true,"type":"integer"},"complexity_rating":{"format":"double","nullable":true,"type":"number"},"description":{"nullable":true,"type":"string"},"max_players":{"format":"int32","nullable":true,"type":"integer"},"min_players":{"format":"int32","nullable":true,"type":"integer"},"name":{"nullable":true,"type":"string"},"play_time_minutes":{"format":"int32","nullable":true,"type":"integer"},"publisher":{"nullable":true,"type":"string"},"year_published":{"format":"int32","nullable":true,"type":"integer"}},"type":"object"},"UpdateHouseRuleRequest":{"properties":{"category":{"nullable":true,"type":"string"},"description":{"nullable":true,"type":"string"},"is_active":{"nullable":true,"type":"boolean"},"title":{"nullable":true,"type":"string"}},"type":"object"},"UploadResponse":{"properties":{"chunks_processed":{"format":"uint32","minimum":0,"nullable":true,"type":"integer"},"file_path":{"nullable":true,"type":"string"},"message":{"type":"string"}},"required":["message"],"type":"object"}}},"info":{"contact":{"url":"https://github.com/your-repo/tabletop-atlas"},"description":"API for managing board games, house rules, and AI-powered chat","license":{"name":"MIT"},"title":"Tabletop Atlas API","version":"1.0.0"},"openapi":"3.0.3","paths":{"/api/chat/message":{"post":{"operationId":"chat_with_rules","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Send a message and get AI response"}},"/api/chat/sessions":{"get":{"operationId":"list_chat_sessions","parameters":[{"in":"query","name":"game_id","required":true,"schema":{"format":"int64","type":"integer"}},{"in":"query","name":"limit","schema":{"format":"uint32","minimum":0,"type":"integer"}},{"in":"query","name":"page","schema":{"format":"uint32","minimum":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_for_ChatSessionSummary"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"List chat sessions for a specific game"},"post":{"operationId":"create_chat_session","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChatSessionRequest"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatSession"}}},"description":"successful creation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Create a new chat session"}},"/api/chat/sessions/{id}":{"get":{"operationId":"get_chat_session","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatHistory"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Get a specific chat session with its message history"}},"/api/games":{"get":{"operationId":"list_games","parameters":[{"in":"query","name":"limit","schema":{"format":"uint32","minimum":0,"type":"integer"}},{"in":"query","name":"page","schema":{"format":"uint32","minimum":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_for_GameSummary"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"List all games with pagination"},"post":{"operationId":"create_game","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGameRequest"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Game"}}},"description":"successful creation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Create a new game"}},"/api/games/{id}":{"delete":{"operationId":"delete_game","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"responses":{"204":{"description":"successful deletion","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Delete a game"},"get":{"operationId":"get_game","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Game"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Get a specific game by ID"},"put":{"operationId":"update_game","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGameRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Game"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Update an existing game"}},"/api/games/{id}/upload-rules":{"post":{"operationId":"upload_rules_pdf","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"requestBody":{"content":{"application/octet-stream":{"schema":{"format":"binary","type":"string"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadResponse"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Upload a PDF rules document for a game"}},"/api/house-rules":{"get":{"operationId":"list_house_rules","parameters":[{"in":"query","name":"game_id","required":true,"schema":{"format":"int64","type":"integer"}},{"in":"query","name":"limit","schema":{"format":"uint32","minimum":0,"type":"integer"}},{"in":"query","name":"page","schema":{"format":"uint32","minimum":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_for_HouseRule"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"List house rules for a specific game"},"post":{"operationId":"create_house_rule","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateHouseRuleRequest"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HouseRule"}}},"description":"successful creation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Create a new house rule"}},"/api/house-rules/{id}":{"delete":{"operationId":"delete_house_rule","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"responses":{"204":{"description":"successful deletion","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Delete a house rule"},"get":{"operationId":"get_house_rule","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HouseRule"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Get a specific house rule by ID"},"put":{"operationId":"update_house_rule","parameters":[{"in":"path","name":"id","required":true,"schema":{"format":"int64","type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateHouseRuleRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HouseRule"}}},"description":"successful operation","headers":{"Access-Control-Allow-Headers":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Methods":{"required":true,"schema":{"type":"string"},"style":"simple"},"Access-Control-Allow-Origin":{"required":true,"schema":{"type":"string"},"style":"simple"}}},"4XX":{"$ref":"#/components/responses/Error"},"5XX":{"$ref":"#/components/responses/Error"}},"summary":"Update an existing house rule"}}}}
